<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_coop_produce_stock_inventory_form" model="ir.ui.view">
            <field name="name">stock.inventory.form</field>
            <field name="model">stock.inventory</field>
	    <field name="sequence" eval="18"/>
            <field name="arch" type="xml">
                <form string="Planification Des Commandes">
			<header>
		                <button name="action_done" string="Validate" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
		                <button name="action_generate_planification" string="Generate Planification" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
			</header>
                    	<field name="state" widget="statusbar" statusbar_visible="draft,confirm,done" invisible="True"/>
			<h2>Planification Des Commandes</h2>
                	<sheet>
		                <group col="6">
		                    <field name="date" readonly="False"/>
		                    <field name="week_number"/>
		                    <field name="hide_initialisation"/>
		                </group>
				<group string="Initialisation" attrs="{'invisible': ['|', ('hide_initialisation', '=', True),('state', '=', 'done')]}" col="6">
					<field name="categ_ids" widget="many2many_tags"/>
					<button name="action_add" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
					<button name="action_reinitialiser" string="Reinitialiser" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
		               	</group>       
				<group col="6" attrs="{'invisible': ['|', ('hide_initialisation', '=', True),('state', '=', 'done')]}">                     	
					<field name="supplier_ids" widget="many2many_tags"/>
					<button name="action_add" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
				</group>
		                <field name="line_ids" string="Inventory Details">
		                        <tree string="Inventory Details" editable="bottom">
		                            <field name="product_id"  domain="[('type','=','product')]"/>
		                            <field name="colisage_ref"/>
		                            <field name="theoretical_qty_ref"/>
		                            <field name="qty_stock"/>
		                            <field name="qty_loss"/>
		                            <field name="product_qty" invisible= "True"/>
		                        </tree>
				</field>
                	</sheet>
                </form>
            </field>
        </record>

        <record id="view_coop_produce_stock_inventory_tree" model="ir.ui.view">
            <field name="name">coop_produce.stock.inventory.tree</field>
            <field name="model">stock.inventory</field>
            <field name="arch" type="xml">
                <tree string="Lot Inventory">
                	<field name="date"/>
                    	<field name="week_number"/>
                </tree>
            </field>
        </record>

        <record id="view_coop_produce_stock_inventory_filter" model="ir.ui.view">
            <field name="name">coop_produce.stock.inventory..filter</field>
            <field name="model">stock.inventory</field>
            <field name="arch" type="xml">
                <search string="Search Inventory">
                    <field name="name" string="Inventory Reference"/>
                    <field name="date"/>
                    <field name="week_number"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <group expand="0" string="Group By">
                        <filter string="Date" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Inventories Week Number" domain="[]" context="{'group_by':'week_number'}" help="Physical Inventories by Week Number"/>
                    </group>
                </search>

            </field>
        </record>



        <record id="action_view_coop_produce_stock_inventories" model="ir.actions.act_window">
            	<field name="name">Inventaire Des F&amp;L</field>
		 <field name="type">ir.actions.act_window</field>
            	<field name="res_model">stock.inventory</field>
            	<field name="search_view_id" ref="view_coop_produce_stock_inventory_filter"/>
            	<field name="view_type">form</field>
       		<field name="view_mode">tree,form</field>
        </record>

	<record id="action_coop_produce_stock_inventories_tree" model="ir.actions.act_window.view">
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="view_coop_produce_stock_inventory_tree"/>
    		<field name="act_window_id" ref="action_view_coop_produce_stock_inventories"/>
	</record>

	<record id="action_coop_produce_stock_inventories_form" model="ir.actions.act_window.view">
	    	<field name="view_mode">form</field>
    		<field name="view_id" ref="view_coop_produce_stock_inventory_form"/>
    		<field name="act_window_id" ref="action_view_coop_produce_stock_inventories"/>
	</record>


    	<menuitem id="menu_inventory_fruits_vegetables" name="Inventaire Des F&amp;L" parent="stock.menu_stock_inventory_control" groups="stock.group_stock_manager" sequence="60" action="action_view_coop_produce_stock_inventories"/>

    </data>
</openerp>
