<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_coop_produce_stock_inventory_form" model="ir.ui.view">
            <field name="name">stock.inventory.form</field>
            <field name="model">stock.inventory</field>
	    <field name="sequence" eval="18"/>
            <field name="arch" type="xml">
                <form string="Inventory F/V">
			<header>
		                <button name="action_done" string="Validate" type="object" attrs="{'invisible': [('state', '=', 'done')]}" class="oe_highlight" groups="stock.group_stock_manager"/>
		                <button name="action_generate_planification" states="done" string="Generate Week Planification" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
                    		<field name="state" widget="statusbar" statusbar_visible="draft,confirm,done"/>
			</header>
                    	<field name="weekly_inventory" invisible="True"/>
                	<sheet>
		                <group col="6" string="Inventory F/V">
		                    <field name="date" string="Date" attrs="{'readonly': [('state', '=', 'done')]}"/>
		                    <field name="week_number" string="Week Number"/>
		                    <field name="hide_initialisation" string="Hide initialisation" attrs="{'invisible': [('state', '=', 'done')]}"/>
		                </group>
				<group string="Initialisation" attrs="{'invisible': ['|', ('hide_initialisation', '=', True),('state', '=', 'done')]}" col="2">
					<group col="3">
						<field name="categ_ids" widget="many2many_tags" string="Product Category"/>
						<button name="action_add_category" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
						<field name="supplier_ids" widget="many2many_tags" string="Supplliers" style="width:9% !important"/>
						<button name="action_add_supplier" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
					</group>
					<group col="1">
						<button name="action_reinitialise" string="Reinitialise" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
					</group>
				</group>
		                <field name="line_ids" string="Inventory Details" attrs="{'readonly': [('state', '=', 'done')]}" mode="tree">
		                        <tree string="Inventory Details" editable="bottom">
		                            <field name="product_id" string="Product" on_change="on_change_product_id(product_id)"/>
		                            <field name="colisage_ref" string="Colissage Ref"/>
		                            <field name="theoretical_qty_ref" string="Qty/Def. pack"/>
		                            <field name="qty_stock" string="Stock Qty" on_change="on_change_qty_stock(qty_stock,theoretical_qty_ref)"/>
		                            <field name="qty_loss" string="Loss"/>
		                            <field name="product_qty" invisible= "True"/>
		                        </tree>
				</field>
                	</sheet>
                </form>
            </field>
        </record>

        <record id="view_coop_produce_stock_inventory_tree" model="ir.ui.view">
            <field name="name">coop_produce.stock.inventory.tree</field>
            <field name="model">stock.inventory</field>
            <field name="arch" type="xml">
                <tree string="Lot Inventory">
                	<field name="date" string="Date"/>
                	<field name="state" string="State"/>
                    	<field name="week_number" string="Week Number"/>
                </tree>
            </field>
        </record>

        <record id="view_coop_produce_stock_inventory_filter" model="ir.ui.view">
            <field name="name">coop_produce.stock.inventory.filter</field>
            <field name="model">stock.inventory</field>
            <field name="arch" type="xml">
                <search string="Search Inventory">
                    <field name="name" string="Inventory Reference"/>
                    <field name="date" string="date"/>
                    <field name="week_number" string="Week Number"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <group expand="0" string="Group By">
                        <filter string="Week" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Week Number" domain="[]" context="{'group_by':'week_number'}" help="Physical Inventories by Week Number"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="action_view_coop_produce_stock_inventories" model="ir.actions.act_window">
            	<field name="name">F/V Inventory</field>
		 <field name="type">ir.actions.act_window</field>
            	<field name="res_model">stock.inventory</field>
            	<field name="search_view_id" ref="view_coop_produce_stock_inventory_filter"/>
            	<field name="view_type">form</field>
		 <field name="context">{'default_weekly_inventory': True}</field>
		 <field name="domain">[('weekly_inventory', '=', True)]</field>
       		<field name="view_mode">tree,form</field>
        </record>

	<record id="action_coop_produce_stock_inventories_tree" model="ir.actions.act_window.view">
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="view_coop_produce_stock_inventory_tree"/>
    		<field name="act_window_id" ref="action_view_coop_produce_stock_inventories"/>
	</record>

	<record id="action_coop_produce_stock_inventories_form" model="ir.actions.act_window.view">
	    	<field name="view_mode">form</field>
    		<field name="view_id" ref="view_coop_produce_stock_inventory_form"/>
    		<field name="act_window_id" ref="action_view_coop_produce_stock_inventories"/>
	</record>

        <record id="view_coop_produce_order_week_planning_form" model="ir.ui.view">
            <field name="name">order.week.planning.form</field>
            <field name="model">order.week.planning</field>
	    <field name="sequence" eval="18"/>
            <field name="arch" type="xml">
                <form string="Order Scheduling">
			<header>
		                <button name="action_close_week" string="Close Week" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
		    		<div class="oe_right" name="buttons">   
		                	<button name="action_reception_week" string="Reception Week" type="object" groups="stock.group_stock_manager" invisible="True"/>
		                	<button name="action_commande_week" string="Week Order" type="object" groups="stock.group_stock_manager" invisible="True"/>
		                	<button name="action_other_weeks" string="Other" type="object" groups="stock.group_stock_manager"/>
		                    	<field name="state" readonly="True"/>
			        </div>
		                <field name="name" invisible="True"/>
		        	<field name="year" invisible="True"/>
			</header>
                	<sheet>
		                <group col="6" string="Order Scheduling">
		                    <field name="date" readonly="True" string="Week"/>
		                    <field name="week_number" readonly="True" string="Week Number"/>
		                    <field name="hide_initialisation" string="Hide initialisation" groups="stock.group_stock_manager"  attrs="{'invisible': [('state', '=', 'done')]}"/>
		                </group>
                                <group string="Initialisation" attrs="{'invisible': [('hide_initialisation', '=', True)]}">
					<group col="4">
						<field name="categ_ids" widget="many2many_tags" string="Product Category"  groups="stock.group_stock_manager"/>
	                                        <button name="action_add_category" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
	                                        <button name="action_reinitialise" string="Reinitialise" type="object" class="oe_highlight" groups="stock.group_stock_manager" invisible="True"/>
	                                        <field name="supplier_ids" widget="many2many_tags" string="Supplier"  groups="stock.group_stock_manager"/>
        	                                <button name="action_add_supplier" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
                	                        <button name="action_reinitialise" string="Reinitialise" type="object" class="oe_highlight" groups="stock.group_stock_manager" invisible="True"/>
					</group>
                                        <group col="1">
	                                        <button name="action_update" string="MAJ S Inv" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
						<group col="2">
	                        	                <field name="week_date" string="Week Date" invisible="True"/>
						</group>
					</group>
                                </group>
					
				<group col="7" string="Pre-generation Orders Per Day">
						<button name="action_add" string="Mond" type="object" style="margin-left:160px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Tues" type="object" style="margin-left:60px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Wed" type="object" style="margin-left:50px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Thurs" type="object" style="margin-left:40px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Fri" type="object" style="margin-left:45px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Sat" type="object" style="margin-left:25px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
				</group>
				<group>
					<group col="7">
						<h4>Total Commandé / À Commander</h4>
				            	<field name="total_command_monday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_tuesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_wednesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_thirsday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_friday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_saturday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
						<h4>Total Reçu</h4>
				            	<field name="total_received_monday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_tuesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_wednesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_thirsday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_friday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_saturday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				       	</group>  
		               	</group>  


		                <field name="line_ids" string="Order Planning Details"  groups="stock.group_stock_manager">
		                        <tree string="Order Planning Details" editable="bottom">
						    <button name="action_view_history" icon="STOCK_JUSTIFY_FILL" type="object" groups="stock.group_stock_manager"/>
				                    <field name="product_id" string="Product"/>
				                    <field name="colisage_ref" string="Colissage"/>
				                    <field name="partner_id" string="Supplier" required="True"/>
				                    <field name="list_price" string="Price U" attrs="{'readonly': [('edit_price', '=', False)]}"/>
						    <button name="action_edit_price" icon="gtk-apply" type="object" groups="stock.group_stock_manager"/>

				                    <field name="vendu-s-2" string="Sold S-2"/>
				                    <field name="vendu-s-1" string="Sold S-1"/>
				                    <field name="vendu_s_inv" string="S Inv"/>
				                    <field name="monday_line" string="Mond"/>
				                    <field name="tuesday_line" string="Tues"/>
				                    <field name="wednesday_line" string="Wed"/>
       				                    <field name="inv_int" string="Inv Int"/>
				                    <field name="thirsday_line" string="Thurs"/>
				                    <field name="friday_line" string="Fri"/>
				                    <field name="saturday_line" string="Sat"/>
				                    <field name="total_in" string="Total + W Inv"/>
				                    <field name="e_in" string="E Inv"/>
				                    <field name="loss" string="Loss"/>
				                    <field name="sold" string="Sold"/>
				                    <field name="week_number" invisible="1"/>
				                    <field name="edit_price" invisible="1"/>
		                        </tree>
				</field>
                	</sheet>
                </form>
            </field>
        </record>

        <record id="view_coop_produce_order_week_planning_tree" model="ir.ui.view">
            <field name="name">order.week.planning.tree</field>
            <field name="model">order.week.planning</field>
            <field name="sequence" eval="18"/>
            <field name="arch" type="xml">
                <tree string="Order Scheduling" default_order='year desc,week_number desc'>
	                <field name="date" string="Date"/>
	                <field name="state" string="State"/>
	                <field name="week_number" string="Week Number"/>
		        <field name="year" invisible="True"/>
                </tree>
            </field>
        </record>

        <record id="view_coop_produce_order_week_planning_filter" model="ir.ui.view">
            <field name="name">order.week.planning.filter</field>
            <field name="model">order.week.planning</field>
            <field name="arch" type="xml">
                <search string="Search Inventory">
                    <field name="date" string="date"/>
                    <field name="week_number" string="Week Number"/>
                    <group expand="0" string="Group By">
                        <filter string="Date" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Week Number" domain="[]" context="{'group_by':'week_number'}" help="Physical Inventories by Week Number"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_coop_produce_order_week_planning_interface_form" model="ir.ui.view">
            <field name="name">order.week.planning.form</field>
            <field name="model">order.week.planning</field>
	    <field name="sequence" eval="18"/>
            <field name="arch" type="xml">
                <form string="Order Scheduling">
			<header>
		                <button name="action_close_week" string="Close Week" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
		    		<div class="oe_right" name="buttons">   
		                	<button name="action_reception_week" string="Reception Week" type="object" groups="stock.group_stock_manager" invisible="True"/>
		                	<button name="action_commande_week" string="Week Order" type="object" groups="stock.group_stock_manager" invisible="True"/>
		                	<button name="action_other_weeks" string="Other" type="object" groups="stock.group_stock_manager"/>
			        </div>
		                <field name="name" invisible="True"/>
		                <field name="year" invisible="True"/>
			</header>
                	<sheet>
		                <group col="6" string="Order Scheduling">
		                    <field name="date" string="Week"/>
		                    <field name="week_number" string="N° Week"/>
		                    <field name="hide_initialisation" string="Hide initialisation" groups="stock.group_stock_manager"/>
		                </group>
                                <group  attrs="{'invisible': [('hide_initialisation', '=', True)]}">
					<group col="4">
						<field name="categ_ids" widget="many2many_tags" string="Product Category"  groups="stock.group_stock_manager"/>
	                                        <button name="action_add_category" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
	                                        <button name="action_reinitialise" string="Reinitialise" type="object" class="oe_highlight" groups="stock.group_stock_manager" invisible="True"/>
	                                        <field name="supplier_ids" widget="many2many_tags" string="Supplier"  groups="stock.group_stock_manager"/>
        	                                <button name="action_add_supplier" string="Add" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
                	                        <button name="action_reinitialise" string="Reinitialise" type="object" class="oe_highlight" groups="stock.group_stock_manager" invisible="True"/>
					</group>
                                        <group col="1">
	                                        <button name="action_update" string="MAJ S Inv" type="object" class="oe_highlight" groups="stock.group_stock_manager"/>
						<group col="2">
	                        	                <field name="week_date" string="Week Date" invisible="True"/>
						</group>
					</group>
                                </group>
				<group col="6" string="Pre-generation Orders Per Day">
						<button name="action_add" string="Mond" type="object" style="margin-left:160px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Tues" type="object" style="margin-left:60px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Wed" type="object" style="margin-left:50px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Thurs" type="object" style="margin-left:40px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Fri" type="object" style="margin-left:45px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
						<button name="action_add" string="Sat" type="object" style="margin-left:25px !important" class="oe_highlight" groups="stock.group_stock_manager"/>
				</group>
				<group>
					<group col="7">
						<h4>Total Commandé / À Commander</h4>
				            	<field name="total_command_monday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_tuesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_wednesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_thirsday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_friday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_command_saturday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
						<h4>Total Reçu</h4>
				            	<field name="total_received_monday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_tuesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_wednesday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_thirsday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_friday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				            	<field name="total_received_saturday" nolabel="1"  groups="stock.group_stock_manager" readonly="True"/>
				       	</group>  
		               	</group>  
		                <field name="line_ids" string="Order Planning Details"  groups="stock.group_stock_manager">
		                        <tree string="Order Planning Details" editable="bottom">
						    <button name="action_view_history" icon="STOCK_JUSTIFY_FILL" type="object" groups="stock.group_stock_manager"/>
				                    <field name="product_id" string="Product"/>
				                    <field name="colisage_ref" string="Colissage"/>
				                    <field name="partner_id" string="Supplier" required="True"/>
				                    <field name="list_price" string="Price U" attrs="{'readonly': [('edit_price', '=', False)]}"/>
						    <button name="action_edit_price" icon="gtk-apply" type="object" groups="stock.group_stock_manager"/>
				                    <field name="vendu-s-2" string="Sold S-2"/>
				                    <field name="vendu-s-1" string="Sold S-1"/>
				                    <field name="vendu_s_inv" string="S Inv"/>
				                    <field name="monday_line" string="Mond"/>
				                    <field name="tuesday_line" string="Tues"/>
				                    <field name="wednesday_line" string="Wed"/>
       				                    <field name="inv_int" string="Inv Int"/>
				                    <field name="thirsday_line" string="Thurs"/>
				                    <field name="friday_line" string="Fri"/>
				                    <field name="saturday_line" string="Sat"/>
				                    <field name="total_in" string="Total + W Inv"/>
				                    <field name="e_in" string="E Inv"/>
				                    <field name="loss" string="Loss"/>
				                    <field name="sold" string="Sold"/>
				                    <field name="week_number" invisible="1"/>
				                    <field name="edit_price" invisible="1"/>
		                        </tree>
				</field>
                	</sheet>
                </form>
            </field>
        </record>

        <record id="view_coop_produce_order_week_planning_action" model="ir.actions.act_window">
        	<field name="name">Planification Of F/V</field>
		 <field name="type">ir.actions.act_window</field>
        	<field name="res_model">order.week.planning</field>
            	<field name="view_type">form</field>
       		<field name="view_mode">tree,form</field>
        </record>

	<record id="action_coop_produce_order_week_planning_tree" model="ir.actions.act_window.view">
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="view_coop_produce_order_week_planning_tree"/>
    		<field name="act_window_id" ref="view_coop_produce_order_week_planning_action"/>
	</record>

	<record id="action_coop_produce_order_week_planning_form" model="ir.actions.act_window.view">
	    	<field name="view_mode">form</field>
    		<field name="view_id" ref="view_coop_produce_order_week_planning_interface_form"/>
    		<field name="act_window_id" ref="view_coop_produce_order_week_planning_action"/>
	</record>

        <record id="view_coop_produce_historique_product_form" model="ir.ui.view">
            <field name="name">coop.product.product.history.form</field>
            <field name="model">planification.product.history</field>
	    <field name="sequence" eval="18"/>
            <field name="arch" type="xml">
                <form string="Historic Produit">
                	<sheet>
		                <group col="4">
		                    <field name="product_id" readonly="True" string="Product"/>
		                    <field name="colissage_ref" readonly="True" string="PCB rE"/>
		                </group>  
		                <field name="line_ids" string="Details Product"  groups="stock.group_stock_manager">
		                        <tree string="Détails Historique Produit" editable="bottom" create="false">
		                            <field name="semaine_nbre" string="N° Week"/>
		                            <field name="prix_unitaire" string="Price U"/>
		                            <field name="s_inv" string="S Inv"/>
		                            <field name="monday_line" string="Mond"/>
		                            <field name="tuesday_line" string="Tues"/>
		                            <field name="wednesday_line" string="Wed"/>
		                            <field name="inv_int" string="Inv Int"/>
		                            <field name="thirsday_line" string="Thurs"/>
		                            <field name="friday_line" string="Fri"/>
		                            <field name="saturday_line" string="Sat"/>
		                            <field name="total_inv" string="Total + W Inv"/>
		                            <field name="e_inv" string="E Inv"/>
		                            <field name="loss" string="Loss"/>
		                            <field name="sold" string="Sold"/>
		                        </tree>
				</field>
                	</sheet>
                </form>
            </field>
        </record>

    	<menuitem id="menu_inventory_fruits_vegetables" name="Inventaire Des F&amp;L" parent="stock.menu_stock_inventory_control" groups="stock.group_stock_manager" sequence="60" action="action_view_coop_produce_stock_inventories"/>

        <menuitem id="menu_planification_fruits_vegetables" name="Planification Des F&amp;L" parent="stock.menu_stock_inventory_control" groups="stock.group_stock_manager" sequence="61" action="view_coop_produce_order_week_planning_action"/>
	
    </data>
</openerp>
